<!doctype html>
<html âš¡>
<head>
  <script async custom-element=amp-experiment src=https://cdn.ampproject.org/v0/amp-experiment-0.1.js></script>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <link rel=stylesheet href=https://cdn.ampproject.org/v0.css>
  <link href=https://fonts.googleapis.com/css?foobar rel=stylesheet type=text/css>
  <link href=https://example.com/favicon.ico rel=icon>
  <style amp-custom>
    .another{display:block}@keyframes anim1{
      from{opacity:0}
      to{opacity:1}
    }
    .foo{height:0}
    @media screen and (max-width:960px){
      @keyframes anim1{
        from{opacity:1;}
        to{opacity:0;}
      }
    }
    .bar{height:auto}
    @supports (display:grid){
      @keyframes anim2 {
        from {opacity: 0;}
        to {opacity: 1;}
      }
    }
  </style>
</head>
<body>
  <p>I should come before style[amp-keyframes]</p>
  <style amp-keyframes>
    @keyframes existing {
      from {height:0px;}
      to {height:100px;}
    }
  </style>
</body>
</html>