



<!doctype html>
<html âš¡>
<head>
  <meta charset="utf-8">
  <link rel="canonical" href="https://example.com/advanced/geolocation_with_amp-list/">
  <title>Geo location with amp-list</title>
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  
  
  <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
  
  <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.2.js"></script>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <style amp-custom>
    :root {
      --color-bg-light: #FAFAFC;
      --color-bg-dark: #CCC;

      --space-1: .5rem;  /* 8px */
      --space-2: 1rem;   /* 16px */

      --box-shadow-1: 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 1px -1px rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);
    }
    .geolist-preview {
      width: 100vw;
      max-width: 400px;
    }

    .geolist-preview h3 {
      margin: var(--space-2) var(--space-1);
    }

    .geolist-preview ul.results {
      list-style: none;
      margin: 0;
      padding: 0 var(--space-1);
      overflow: auto; /* Fixes collapsing margins on the LIs */
    }

    .geolist-preview ul.results li {
      height: 100px;
      background: var(--color-bg-light);
      border-radius: 2px;
      margin-bottom: var(--space-2);
      position: relative;
      box-shadow: var(--box-shadow-1);
    }
    .geolist-preview ul.results p {
      margin: 0;
    }
    .geolist-preview ul.results amp-img {
      background-image: url(/img/geolocation_map_skeleton.png);
      background-size: 150px 100px;
      float: left;
      margin-right: var(--space-1);
    }
    .geolist-preview div[placeholder] ul.results li {
      background: url(/img/geolocation_map_skeleton.png), /* Image */
        linear-gradient(var(--color-bg-dark) 100%, transparent 0), /* Image Placeholder */
        linear-gradient(var(--color-bg-dark) 100%, transparent 0), /* City */
        linear-gradient(var(--color-bg-dark) 100%, transparent 0), /* State */
        linear-gradient(var(--color-bg-dark) 100%, transparent 0); /* Country */
      background-size: 150px 100px, /* Image */
        150px 100px, /* Image Placeholder */
        150px var(--space-2), /* City */
        130px var(--space-2), /* State */
        130px var(--space-2); /* Country */
      background-position: 0 0, /* Image */
        0 0, /* Image Placholder */
        155px 4px, /* City */
        155px 29px, /* State */
        155px 53px; /* Country */
      background-repeat: no-repeat;
    }
    .geolist-preview span.placeholder {
      display: inline-block;
      height: 24px;
      width: 150px;
      background-color: var(--color-bg-dark);
      position: relative;
      top: 4px;
    }
  </style>
</head>
<body>

  
  
  <amp-list class="geolist-preview" width="auto" height="640" layout="fixed-height"
            noloading
            src="https://caramel-wolf.glitch.me//location-specific-results.json"
            single-item items=".">
    <template type="amp-mustache" id="amp-template-id">
      <h3>You are in {{location}}</h3>
      <ul class="results">
        {{#results}}
          <li>
            <amp-img
              alt="{{placeName}} Map" noloading
              layout="fixed" width="150" height="100"
              src="https://maps.googleapis.com/maps/api/staticmap?markers={{lat}},{{lng}}&zoom=9&size=150x100&maptype=roadmap&key=AIzaSyByT-0aYa-nEF0gGqJHNpEEK1bus00losI">
            </amp-img>
            <p>
              <strong>{{placeName}}</strong><br>
              {{adminName1}}<br>
              {{countryCode}}
            </p>
          </li>
        {{/results}}
      </ul>
    </template>
    <div placeholder>
      <h3>You are in <span class="placeholder"></span></h3>
      <ul class="results">
        <li></li><li></li><li></li><li></li><li></li>
      </ul>
    </div>
  </amp-list>

</body>
</html>
