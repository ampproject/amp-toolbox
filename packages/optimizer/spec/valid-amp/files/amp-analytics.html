

<!doctype html>
<html âš¡>
<head>
  <meta charset="utf-8">
  <title>amp-analytics</title>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  
  
  <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
  <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
  <script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>
  <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
  
  <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  <link rel="canonical" href="https://example.com/components/amp-analytics/">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <style amp-custom>
    :root {
      --color-text-light: #fff;
      --space-2: 1rem;  /* 16px */
    }
    .fixed-dashboard {
        background-color: #e0e0e0;
        position: fixed;
        bottom: 0;
        right: 0;
        width: 100%;
        z-index: 100;
        margin: var(--space-2);
        box-shadow:0 1px 1px 0 rgba(0,0,0,.14),0 1px 1px -1px rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);
    }
    amp-carousel .slide {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      background: green;
      color: var(--color-text-light);
    }
    </style>
</head>
<body>
    
    <amp-iframe class="fixed-dashboard" 
        width="180"	
        height="180" layout="fixed"	
        sandbox="allow-scripts allow-same-origin"	
        frameborder="0"	
        src="https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/embed?user=[[.]]&account=ampbyexample">	
      <amp-img src="/img/pixel-white.png"	
          layout="fixed-height"	
          height="350"	
          width="auto"	
          placeholder></amp-img>	
  </amp-iframe>
  
  
  <amp-analytics>
  <script type="application/json">
  {
    "requests": {
      "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
    },
    "triggers": {
      "trackPageview": {
        "on": "visible",
        "request": "event",
        "vars": {
          "eventId": "pageview"
        }
      }
    }
  }
  </script>
  </amp-analytics>
  
  
  <amp-analytics>
  <script type="application/json">
  {
    "requests": {
      "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
    },
    "triggers": {
      "trackPageview": {
        "on": "visible",
        "request": "event",
        "visibilitySpec": {
          "selector": "#cat-image-id",
          "visiblePercentageMin": 20,
          "totalTimeMin": 500,
          "continuousTimeMin": 200
        },
        "vars": {
          "eventId": "catview"
        }
      }
    }
  }
  </script>
  </amp-analytics>

  
  <amp-img id="cat-image-id" src="/img/cat-looking-up-300x200.jpg" width="300" height="200" attribution="visualhunt" alt="a cat" layout="responsive"></amp-img>

  
      <div>
          <button on="tap:an-image.toggleVisibility">
             Toggle image
          </button>
          <amp-img hidden id="an-image" src="/img/amp.jpg" width="1080" height="610" layout="responsive" alt="AMP">
          </amp-img>
      </div>
      
  <amp-analytics>
      <script type="application/json">
      {
        "requests": {
          "elementShown": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
        },
        "triggers": {
          "defaultPageview": {
            "on": "visible",
            "request": "elementShown",
            "selector": "#an-image",
            "vars": {
              "eventId": "imageShownAfterButtonClick"
            }
          }
        }
      }
      </script>
      </amp-analytics>

  
  
  <amp-analytics>
  <script type="application/json">
  {
    "requests": {
      "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
    },
    "triggers": {
      "trackAnchorClicks": {
        "on": "click",
        "selector": "a",
        "request": "event",
        "vars": {
          "eventId": "clickOnAnyAnchor"
        }
      }
    }
  }
  </script>
  </amp-analytics>

  
  <ul>
    <li><a>a link</a></li>
    <li><a>another link</a></li>
  </ul>

  
  <amp-analytics>
    <script type="application/json">
    {
      "requests": {
        "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
      },
      "triggers": {
        "trackAnchorClicks": {
          "on": "click",
          "selector": "#anchor-id",
          "request": "event",
          "vars": {
            "eventId": "clickOnSpecialAnchor"
          }
        }
      }
    }
    </script>
  </amp-analytics>
  
  <ul>
    <li><a id="anchor-id">a special link</a>.</li>
    <li><a id="another-anchor-id">a not so special link</a>.</li>
  </ul>

  
  
  <amp-analytics>
    <script type="application/json">
    {
      "requests": {
        "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
      },
      "triggers": {
        "scrollPings": {
          "on": "scroll",
          "scrollSpec": {
            "verticalBoundaries": [10, 20, 30, 40, 50, 60, 70, 80, 90]
          },
          "request": "event",
          "vars": {
            "eventId": "scroll"
          }
        }
      }
    }
    </script>
  </amp-analytics>
  
  
  <amp-analytics>
    <script type="application/json">
    {
      "requests": {
        "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
      },
      "triggers": {
        "pageTimer": {
          "on": "timer",
          "timerSpec": {
            "interval": 10,
            "maxTimerLength": 600
          },
          "request": "event",
          "vars": {
            "eventId": "timer"
          }
        }
      }
    }
    </script>
  </amp-analytics>
  
  
  <amp-carousel width="400" height="300" layout="responsive" type="slides">
    <div class="slide" data-slide-id="slide1">Slide 1</div>
    <div class="slide" data-slide-id="slide2">Slide 2</div>
    <div class="slide">Slide 3</div>
  </amp-carousel>

  
  
  <amp-analytics>
    <script type="application/json">
    {
      "requests": {
        "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
      },
      "triggers": {
        "ampCarouselChange": {
          "on": "amp-carousel-change",
          "request": "event",
          "vars": {
            "eventId": "carousel-change-${toSlide}"
          }
        }
      }
    }
    </script>
  </amp-analytics>
  
  <amp-analytics>
    <script type="application/json">
    {
      "requests": {
        "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
      },
      "triggers": {
        "ampCarouselNext": {
          "on": "amp-carousel-next",
          "request": "event",
          "vars": {
            "eventId": "carousel-next-${toSlide}"
          }
        }
      }
    }
    </script>
  </amp-analytics>
  
  <amp-analytics>
    <script type="application/json">
    {
      "requests": {
        "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
      },
      "triggers": {
        "ampCarouselPrev": {
          "on": "amp-carousel-prev",
          "request": "event",
          "vars": {
            "eventId": "carousel-prev-${fromSlide}"
          }
        }
      }
    }
    </script>
  </amp-analytics>
  
  
  <div>
    <amp-analytics>
      <script type="application/json">
        {
          "requests": {
            "event": "https://amp-publisher-samples-staging.herokuapp.com/amp-analytics/ping?user=[[.]]&account=ampbyexample&event=${eventId}"
          },
          "triggers": {
            "formSubmit": {
              "on": "amp-form-submit",
              "request": "event",
              "selector":"#testForm",
              "vars": {
                "eventId": "form-submit"
              }
            },
            "formSubmitSuccess": {
              "on": "amp-form-submit-success",
              "request": "event",
              "selector":"#testForm",
              "vars": {
                "eventId": "form-submit-success"
              }
            },
            "formSubmitError": {
              "on": "amp-form-submit-error",
              "request": "event",
              "selector":"#testForm",
              "vars": {
                "eventId": "form-submit-error"
              }
            }
          }
        }
      </script>
    </amp-analytics>
    <p>Try to insert any name as a name input in the form to see the <code>amp-form-submit-success</code> event.</p>
    <p>Try to insert the word "error" as a name input in the form to see the <code>amp-form-submit-error</code> event.</p>
    <form 
        id="testForm"
        method="post"
        action-xhr="/components/amp-form/submit-form-input-text-xhr"
        target="_top">
      <input type="text"
          name="name"
          placeholder="Name..."
          required>
    <input type="submit" value="Subscribe">
  </form>
  </div>
</body>
</html>
